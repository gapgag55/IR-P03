{"ast":null,"code":"import _toConsumableArray from \"/Users/kopkap/Desktop/ir-p03/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/kopkap/Desktop/ir-p03/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kopkap/Desktop/ir-p03/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kopkap/Desktop/ir-p03/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kopkap/Desktop/ir-p03/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kopkap/Desktop/ir-p03/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kopkap/Desktop/ir-p03/client/src/containers/question.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport striptags from 'striptags';\nimport { Headspan, Container, FlexRowBetween, FlexColumn, Wrapper, Head, NoResult } from '../utility';\nimport Box from '../components/box';\nimport Loadmore from '../components/loadmore';\n\nvar Question =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Question, _Component);\n\n  function Question(props) {\n    var _this;\n\n    _classCallCheck(this, Question);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Question).call(this, props));\n\n    _this.nextPage = function () {\n      var page = _this.state.page;\n\n      _this.setState({\n        page: page + 1\n      }, function () {\n        _this.loadItems();\n      });\n    };\n\n    _this.loadItems = function () {\n      var page = _this.state.page;\n      var keyword = _this.props.match.params.keyword;\n      axios.get(\"http://localhost:5000/api/pantip/\".concat(keyword, \"/\").concat(page)).then(function (result) {\n        var items = result['data'];\n        items.map(function (item) {\n          var id = item.id,\n              text = item.text,\n              type = item.type,\n              tag = item.tag;\n          text = striptags(text.replace(/[&]nbsp[;]/gi, \" \"));\n\n          if (type == 'ques') {\n            _this.setState({\n              questionItems: _toConsumableArray(_this.state.questionItems).concat([{\n                id: id,\n                title: text,\n                tag: tag\n              }])\n            });\n          }\n        });\n      });\n    };\n\n    _this.state = {\n      questionItems: [],\n      page: 1\n    };\n    return _this;\n  }\n\n  _createClass(Question, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.loadItems();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var questionItems = this.state.questionItems;\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(FlexColumn, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(FlexRowBetween, {\n        style: {\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Question\"), React.createElement(Headspan, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, questionItems.length, \" items\"))), questionItems.length == 0 ? React.createElement(NoResult, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"No result found\") : questionItems.map(function (item, index) {\n        return React.createElement(Box, {\n          item: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        });\n      })), React.createElement(Loadmore, {\n        onClick: this.nextPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Question;\n}(Component);\n\nexport default Question;","map":{"version":3,"sources":["/Users/kopkap/Desktop/ir-p03/client/src/containers/question.js"],"names":["React","Component","axios","striptags","Headspan","Container","FlexRowBetween","FlexColumn","Wrapper","Head","NoResult","Box","Loadmore","Question","props","nextPage","page","state","setState","loadItems","keyword","match","params","get","then","result","items","map","item","id","text","type","tag","replace","questionItems","title","width","length","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport striptags from 'striptags'\nimport {\n  Headspan,\n  Container,\n  FlexRowBetween,\n  FlexColumn,\n  Wrapper,\n  Head,\n  NoResult\n} from '../utility';\n\nimport Box from '../components/box';\nimport Loadmore from '../components/loadmore';\n\nclass Question extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      questionItems: [],\n      page: 1,\n    };\n  }\n\n  componentWillMount() {\n    this.loadItems();\n  }\n\n  nextPage = () => {\n    const { page } = this.state;\n\n    this.setState({\n      page: page + 1\n    }, () => {\n      this.loadItems();\n    })\n  }\n\n  loadItems = () => {\n    const { page } = this.state;\n    const { keyword } = this.props.match.params;\n\n    axios.get(`http://localhost:5000/api/pantip/${keyword}/${page}`).then(result => {\n  \n      const items = result['data'];\n\n      items.map(item => {\n        let { id, text, type, tag } = item\n        text = striptags(text.replace(/[&]nbsp[;]/gi,\" \"))\n\n        if (type == 'ques') {\n    \n          this.setState({\n            questionItems: [\n              ...this.state.questionItems, {id, title: text, tag}],\n          })\n\n        }\n      })\n    });\n  }\n\n\n  render() {\n    const { questionItems } = this.state;\n    return (\n      <Container>\n        <FlexColumn>\n          <Wrapper>\n            <Head>\n              <FlexRowBetween style={{ width: '100%' }}>\n                <div>Question</div>\n                <Headspan>{questionItems.length} items</Headspan>\n              </FlexRowBetween>\n            </Head>\n            {questionItems.length == 0 ? \n              <NoResult>No result found</NoResult>\n              : questionItems.map((item, index) => (\n                <Box item={item} />\n            ))}\n          </Wrapper>\n          {<Loadmore onClick={this.nextPage} />}\n        </FlexColumn>\n      </Container>\n    );\n  }\n}\n\nexport default Question;\n"]},"metadata":{},"sourceType":"module"}